{
  "cases": [
    {
      "name": "mixed chapter numbers and links preserve coherent chapter progression",
      "currentPath": "story/ch02.md",
      "nodes": [
        {
          "path": "story/ch00.md",
          "title": "Prologue",
          "storyId": "chronicles",
          "chapter": 0,
          "chapterTitle": "",
          "previousChapterRefs": [],
          "nextChapterRefs": []
        },
        {
          "path": "story/ch01.md",
          "title": "Chapter 1",
          "storyId": "chronicles",
          "chapter": 1,
          "chapterTitle": "",
          "previousChapterRefs": [],
          "nextChapterRefs": ["story/ch02"]
        },
        {
          "path": "story/ch02.md",
          "title": "Chapter 2",
          "storyId": "chronicles",
          "chapter": 2,
          "chapterTitle": "",
          "previousChapterRefs": ["story/ch01"],
          "nextChapterRefs": ["story/ch03"]
        },
        {
          "path": "story/ch03.md",
          "title": "Chapter 3",
          "storyId": "chronicles",
          "chapter": 3,
          "chapterTitle": "",
          "previousChapterRefs": ["story/ch02"],
          "nextChapterRefs": []
        }
      ],
      "expectedOrderedPaths": [
        "story/ch00.md",
        "story/ch01.md",
        "story/ch02.md",
        "story/ch03.md"
      ],
      "expectedCurrentIndex": 2
    },
    {
      "name": "cycle falls back to deterministic chapter and path ordering",
      "currentPath": "story/b.md",
      "nodes": [
        {
          "path": "story/a.md",
          "title": "A",
          "storyId": "chronicles",
          "chapter": 1,
          "chapterTitle": "",
          "previousChapterRefs": [],
          "nextChapterRefs": ["story/b"]
        },
        {
          "path": "story/b.md",
          "title": "B",
          "storyId": "chronicles",
          "chapter": 2,
          "chapterTitle": "",
          "previousChapterRefs": [],
          "nextChapterRefs": ["story/a"]
        },
        {
          "path": "story/c.md",
          "title": "C",
          "storyId": "chronicles",
          "chapter": 2,
          "chapterTitle": "",
          "previousChapterRefs": [],
          "nextChapterRefs": []
        }
      ],
      "expectedOrderedPaths": [
        "story/a.md",
        "story/b.md",
        "story/c.md"
      ],
      "expectedCurrentIndex": 1
    },
    {
      "name": "basename refs resolve deterministically inside one story scope",
      "currentPath": "arc/part-2.md",
      "nodes": [
        {
          "path": "arc/part-1.md",
          "title": "Part 1",
          "storyId": "chronicles",
          "chapter": 1,
          "chapterTitle": "",
          "previousChapterRefs": [],
          "nextChapterRefs": ["[[part-2]]"]
        },
        {
          "path": "arc/part-2.md",
          "title": "Part 2",
          "storyId": "chronicles",
          "chapter": 2,
          "chapterTitle": "",
          "previousChapterRefs": ["[[part-1]]"],
          "nextChapterRefs": []
        },
        {
          "path": "other/part-1.md",
          "title": "Other Part 1",
          "storyId": "other-story",
          "chapter": 1,
          "chapterTitle": "",
          "previousChapterRefs": [],
          "nextChapterRefs": []
        }
      ],
      "expectedOrderedPaths": [
        "arc/part-1.md",
        "arc/part-2.md"
      ],
      "expectedCurrentIndex": 1
    }
  ]
}
